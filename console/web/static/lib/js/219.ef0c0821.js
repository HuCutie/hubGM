"use strict";(self["webpackChunkvue3_template"]=self["webpackChunkvue3_template"]||[]).push([[219],{491:function(e,l,t){t.d(l,{K5:function(){return u},T8:function(){return o},ZC:function(){return d},Zr:function(){return i},p:function(){return n},ss:function(){return s},tm:function(){return r}});var a=t(6569);const o=e=>a.d.request({url:"/gm/account/list",method:"get",params:e}),n=(e,l)=>a.d.request({url:`/gm/account/${e}/recharge`,method:"post",data:l}),u=e=>a.d.request({url:`/gm/account/${e}/reset_create_charac`,method:"post"}),r=e=>a.d.request({url:`/gm/account/${e}`,method:"delete"}),i=(e,l)=>a.d.request({url:`/gm/account/${e}/change_password`,method:"post",data:l}),d=(e,l)=>a.d.request({url:`/gm/account/${e}`,method:"put",data:l}),s=e=>a.d.request({url:"/gm/account",method:"post",data:e})},9456:function(e,l,t){t.d(l,{F3:function(){return o},WZ:function(){return u},_o:function(){return n}});var a=t(6569);const o=e=>a.d.request({url:`/gm/account/${e}/roles`,method:"get"}),n=(e,l)=>a.d.request({url:`/gm/roles/${e}/qp`,method:"put",data:l}),u=(e,l)=>a.d.request({url:`/gm/roles/${e}/pvp`,method:"put",data:l})},9136:function(e,l,t){t.d(l,{Z:function(){return v}});var a=t(7477),o=t(3396),n=t(7139);const u={class:"bot",style:{height:"20px","margin-bottom":"10px",background:"#fff"}},r={class:"bline-dotted"},i={class:"category-index"},d={class:"category-name"},s={style:{padding:"10px 30px 20px"}};function p(e,l,t,a,p,m){const c=(0,o.up)("el-col"),f=(0,o.up)("el-row");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(f,{class:(0,n.C_)(t.isLast?"last-step":"")},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{span:24},{default:(0,o.w5)((()=>[(0,o._)("div",u,[(0,o._)("div",r,[(0,o._)("div",i,(0,n.zw)(t.num),1),(0,o._)("div",d,(0,n.zw)(t.title),1)])])])),_:1})])),_:1},8,["class"]),(0,o._)("div",null,[(0,o._)("div",s,[(0,o._)("div",{class:(0,n.C_)(t.isLast?"last-div":"")},[(0,o.WI)(e.$slots,"default",{},void 0,!0)],2)])])])}var m={name:"PanelStep",props:{num:{type:[String,Number],required:!0,default:1},title:{type:String},isLast:{type:Boolean,default:!1}}},c=t(89);const f=(0,c.Z)(m,[["render",p],["__scopeId","data-v-10870d64"]]);var w=f;const _=(0,a.nz)(w);var v=_},2141:function(e,l,t){t.r(l),t.d(l,{default:function(){return D}});var a=t(3396),o=t(4870),n=t(2507),u=t(9136),r=t(7139),i=t(5134),d=t(7192),s=t(9456),p=t(6881);const m={class:"text-gray-lg sm"},c={class:"dialog-footer"};var f=(0,a.aZ)({__name:"RoleQPDialog",emits:["reloadRoles"],setup(e,{expose:l,emit:t}){const n=(0,o.qj)({visible:!1,title:""}),u=(0,o.iH)(),i=(0,o.qj)({qp:500}),f=(0,o.qj)({qp:[{type:"integer",min:0,message:"QP值至少未0",trigger:"blur"}]}),w=(0,o.iH)(null);let _=null;const v=e=>{n.visible=!0,n.title="修改QP",w.value=e.QP,_=e.charac_no,(0,a.Y3)((()=>{u.value.resetFields()}))},g=async()=>{const e=await(0,d.Gu)(u);if(e)try{await(0,s._o)(_,i),(0,p.PE)("更新成功"),n.visible=!1,t("reloadRoles")}catch(l){}};return l({showQpDialog:v}),(e,l)=>{const t=(0,a.up)("el-form-item"),o=(0,a.up)("el-input-number"),d=(0,a.up)("el-form"),s=(0,a.up)("el-col"),p=(0,a.up)("el-row"),_=(0,a.up)("el-button"),v=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(v,{modelValue:n.visible,"onUpdate:modelValue":l[2]||(l[2]=e=>n.visible=e),title:n.title,width:"600px","close-on-press-escape":!1,"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a._)("span",c,[(0,a.Wm)(_,{onClick:l[1]||(l[1]=e=>n.visible=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)("取 消")])),_:1}),(0,a.Wm)(_,{type:"primary",onClick:g},{default:(0,a.w5)((()=>[(0,a.Uk)("确 定")])),_:1})])])),default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{span:22},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{model:i,rules:f,ref_key:"formRef",ref:u,"label-width":"100px"},{default:(0,a.w5)((()=>[(0,a.Wm)(t,{label:"现有QP"},{default:(0,a.w5)((()=>[(0,a._)("span",m,(0,r.zw)(w.value),1)])),_:1}),(0,a.Wm)(t,{label:"修改QP",prop:"qp"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{min:0,modelValue:i.qp,"onUpdate:modelValue":l[0]||(l[0]=e=>i.qp=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1},8,["modelValue","title"])])}}});const w=f;var _=w;const v={class:"dialog-footer"};var g=(0,a.aZ)({__name:"RolePvpDialog",emits:["reloadRoles"],setup(e,{expose:l,emit:t}){const n=(0,o.qj)({visible:!1,title:""}),u=(0,o.iH)();let r=(0,o.qj)({win:0,pvp_grade:0,pvp_point:0});const m=(0,o.qj)({pvp_grade:[{type:"integer",min:0,max:34,message:"pk段位0至34",trigger:"blur"}]});let c=null;const f=e=>{n.visible=!0,n.title="修改PK段位",c=e.charac_no,(0,a.Y3)((()=>{(0,i.U5)(r,e.pvp),u.value.clearValidate()}))},w=async()=>{const e=await(0,d.Gu)(u);if(e)try{await(0,s.WZ)(c,r),(0,p.PE)("更新成功"),n.visible=!1,t("reloadRoles")}catch(l){}};return l({showPvpDialog:f}),(e,l)=>{const t=(0,a.up)("el-input-number"),i=(0,a.up)("el-form-item"),d=(0,a.up)("el-form"),s=(0,a.up)("el-col"),p=(0,a.up)("el-row"),c=(0,a.up)("el-button"),f=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(f,{modelValue:n.visible,"onUpdate:modelValue":l[4]||(l[4]=e=>n.visible=e),title:n.title,width:"600px","close-on-press-escape":!1,"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a._)("span",v,[(0,a.Wm)(c,{onClick:l[3]||(l[3]=e=>n.visible=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)("取 消")])),_:1}),(0,a.Wm)(c,{type:"primary",onClick:w},{default:(0,a.w5)((()=>[(0,a.Uk)("确 定")])),_:1})])])),default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{span:22},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{model:(0,o.SU)(r),rules:m,ref_key:"formRef",ref:u,"label-width":"100px"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{label:"PK段位",prop:"pvp_grade"},{default:(0,a.w5)((()=>[(0,a.Wm)(t,{min:0,max:34,modelValue:(0,o.SU)(r).pvp_grade,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,o.SU)(r).pvp_grade=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),(0,a.Wm)(i,{label:"胜利场次",prop:"win"},{default:(0,a.w5)((()=>[(0,a.Wm)(t,{min:0,modelValue:(0,o.SU)(r).win,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,o.SU)(r).win=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),(0,a.Wm)(i,{label:"胜点",prop:"pvp_point"},{default:(0,a.w5)((()=>[(0,a.Wm)(t,{min:0,max:99,modelValue:(0,o.SU)(r).pvp_point,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,o.SU)(r).pvp_point=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1},8,["modelValue","title"])])}}});const b=g;var h=b;const y={key:0},W={key:1};var k=(0,a.aZ)({__name:"RolesTable",props:{data:{type:Array,required:!0,default:()=>[]},loading:{type:Boolean,required:!0,default:!1}},emits:["reloadRoles"],setup(e,{emit:l}){const t=(0,o.iH)(),n=e=>{t.value.showQpDialog(e)},u=(0,o.iH)(),d=e=>{u.value.showPvpDialog(e)},s=()=>{l("reloadRoles")};return(l,p)=>{const m=(0,a.up)("el-table-column"),c=(0,a.up)("el-button"),f=(0,a.up)("el-table"),w=(0,a.Q2)("loading");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.wy)(((0,a.wg)(),(0,a.j4)(f,{data:e.data,ref:"tableRef",border:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{prop:"charac_no",label:"角色编号",width:"120"}),(0,a.Wm)(m,{prop:"charac_name",label:"角色名称",width:"180"}),(0,a.Wm)(m,{prop:"money",label:"金币",width:"180"},{default:(0,a.w5)((e=>[(0,a._)("span",null,(0,r.zw)((0,o.SU)(i.T4)(e.row.money)),1)])),_:1}),(0,a.Wm)(m,{prop:"QP",label:"QP",width:"120"}),(0,a.Wm)(m,{prop:"create_time",label:"创建时间",width:"180"},{default:(0,a.w5)((e=>[(0,a._)("span",null,(0,r.zw)((0,o.SU)(i.vc)(e.row.create_time)),1)])),_:1}),(0,a.Wm)(m,{prop:"lev",label:"等级"}),(0,a.Wm)(m,{prop:"pvp.pvp_grade",label:"PK等级",width:"100"},{default:(0,a.w5)((e=>[e.row.pvp.pvp_grade?((0,a.wg)(),(0,a.iD)("span",y,(0,r.zw)(e.row.pvp.pvp_grade),1)):((0,a.wg)(),(0,a.iD)("span",W,"-"))])),_:1}),(0,a.Wm)(m,{label:"操作",width:"180",align:"right"},{default:(0,a.w5)((e=>[(0,a.Wm)(c,{type:"primary",link:"",size:"small",onClick:l=>n(e.row)},{default:(0,a.w5)((()=>[(0,a.Uk)("修改QP")])),_:2},1032,["onClick"]),(0,a.Wm)(c,{type:"primary",link:"",size:"small",onClick:l=>d(e.row)},{default:(0,a.w5)((()=>[(0,a.Uk)("修改PK段位")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[w,e.loading]]),(0,a.Wm)((0,o.SU)(_),{ref_key:"qpDialogRef",ref:t,onReloadRoles:s},null,512),(0,a.Wm)((0,o.SU)(h),{ref_key:"pvpDialogRef",ref:u,onReloadRoles:s},null,512)])}}});const U=k;var q=U,S=t(3498);const R={class:"tc-step-border"},V={class:"l"};var x=(0,a.aZ)({__name:"index",setup(e){const l=(0,o.qj)({data:[],loading:!1});let t=null;const r=e=>{t=e,i()},i=async()=>{try{l.loading=!0,l.data=await(0,s.F3)(t),l.loading=!1}catch(e){l.loading=!1}};return(e,t)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)((0,o.SU)(n.Z),{title:"角色管理"}),(0,a._)("div",R,[(0,a._)("div",V,[(0,a.Wm)((0,o.SU)(u.Z),{num:"1",title:"账号选择"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(S.Z),{onSetUid:r})])),_:1}),(0,a.Wm)((0,o.SU)(u.Z),{num:"2",title:"角色信息","is-last":""},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(q),{data:l.data,loading:l.loading,onReloadRoles:i},null,8,["data","loading"])])),_:1})])])]))}});const P=x;var D=P},3498:function(e,l,t){t.d(l,{Z:function(){return m}});var a=t(3396),o=t(4870),n=t(7139),u=t(491),r=t(7192);const i={style:{float:"left"}},d={style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"13px"}};var s=(0,a.aZ)({__name:"SelectAccount",props:{hasRole:{type:Boolean,default:!0},hasBtn:{type:Boolean,default:!0},labelWidth:{type:String,default:"100px"}},emits:["setUid"],setup(e,{emit:l}){const t=e,{hasRole:s,hasBtn:p,labelWidth:m}=(0,o.BK)(t),c=(0,o.iH)(),f=(0,o.qj)({uid:18000002}),w=(0,o.qj)({uid:[{required:!0,message:"请选择账号",trigger:"blur"}]}),_=(0,o.qj)({data:[]}),v=(0,o.iH)(!1),g=async()=>{v.value=!0,_.data=await(0,u.T8)({has_roles:s.value}),v.value=!1},b=async()=>{const e=await(0,r.Gu)(c);e&&l("setUid",f.uid)};return g(),(e,l)=>{const t=(0,a.up)("el-option"),u=(0,a.up)("el-select"),r=(0,a.up)("el-form-item"),s=(0,a.up)("el-button"),g=(0,a.up)("el-form");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(g,{model:f,rules:w,ref_key:"formRef",ref:c,"label-width":(0,o.SU)(m)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{label:"账号ID",prop:"uid"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:f.uid,"onUpdate:modelValue":l[0]||(l[0]=e=>f.uid=e),onChange:b,filterable:"",clearable:"",placeholder:"选择账号id",loading:v.value,"loading-text":"正在加载账号"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(_.data,(e=>((0,a.wg)(),(0,a.j4)(t,{key:e.uid,label:e.uid,value:e.uid},{default:(0,a.w5)((()=>[(0,a._)("span",i,(0,n.zw)(e.uid),1),(0,a._)("span",d," 角色数:"+(0,n.zw)(e.roles),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue","loading"])])),_:1}),(0,o.SU)(p)?((0,a.wg)(),(0,a.j4)(r,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{type:"primary",onClick:b,size:"small"},{default:(0,a.w5)((()=>[(0,a.Uk)("查询")])),_:1})])),_:1})):(0,a.kq)("",!0)])),_:1},8,["model","rules","label-width"])])}}});const p=s;var m=p}}]);