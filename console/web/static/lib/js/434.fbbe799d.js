"use strict";(self["webpackChunkvue3_template"]=self["webpackChunkvue3_template"]||[]).push([[434],{491:function(e,a,t){t.d(a,{K5:function(){return u},T8:function(){return n},ZC:function(){return i},Zr:function(){return d},p:function(){return r},ss:function(){return s},tm:function(){return o}});var l=t(6569);const n=e=>l.d.request({url:"/gm/account/list",method:"get",params:e}),r=(e,a)=>l.d.request({url:`/gm/account/${e}/recharge`,method:"post",data:a}),u=e=>l.d.request({url:`/gm/account/${e}/reset_create_charac`,method:"post"}),o=e=>l.d.request({url:`/gm/account/${e}`,method:"delete"}),d=(e,a)=>l.d.request({url:`/gm/account/${e}/change_password`,method:"post",data:a}),i=(e,a)=>l.d.request({url:`/gm/account/${e}`,method:"put",data:a}),s=e=>l.d.request({url:"/gm/account",method:"post",data:e})},9456:function(e,a,t){t.d(a,{F3:function(){return n},WZ:function(){return u},_o:function(){return r}});var l=t(6569);const n=e=>l.d.request({url:`/gm/account/${e}/roles`,method:"get"}),r=(e,a)=>l.d.request({url:`/gm/roles/${e}/qp`,method:"put",data:a}),u=(e,a)=>l.d.request({url:`/gm/roles/${e}/pvp`,method:"put",data:a})},9136:function(e,a,t){t.d(a,{Z:function(){return w}});var l=t(7477),n=t(3396),r=t(7139);const u={class:"bot",style:{height:"20px","margin-bottom":"10px",background:"#fff"}},o={class:"bline-dotted"},d={class:"category-index"},i={class:"category-name"},s={style:{padding:"10px 30px 20px"}};function c(e,a,t,l,c,p){const m=(0,n.up)("el-col"),f=(0,n.up)("el-row");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(f,{class:(0,r.C_)(t.isLast?"last-step":"")},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{span:24},{default:(0,n.w5)((()=>[(0,n._)("div",u,[(0,n._)("div",o,[(0,n._)("div",d,(0,r.zw)(t.num),1),(0,n._)("div",i,(0,r.zw)(t.title),1)])])])),_:1})])),_:1},8,["class"]),(0,n._)("div",null,[(0,n._)("div",s,[(0,n._)("div",{class:(0,r.C_)(t.isLast?"last-div":"")},[(0,n.WI)(e.$slots,"default",{},void 0,!0)],2)])])])}var p={name:"PanelStep",props:{num:{type:[String,Number],required:!0,default:1},title:{type:String},isLast:{type:Boolean,default:!1}}},m=t(89);const f=(0,m.Z)(p,[["render",c],["__scopeId","data-v-10870d64"]]);var g=f;const _=(0,l.nz)(g);var w=_},4466:function(e,a,t){t.d(a,{F:function(){return n}});var l=t(2655);const n=e=>l.T.confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})},1285:function(e,a,t){t.d(a,{Z:function(){return i}});var l=t(3396),n=t(7139),r=t(4870),u=t(5134),o=(0,l.aZ)({__name:"RoleTable",props:{data:{type:Array,required:!0,default:()=>[]},loading:{type:Boolean,required:!0,default:!1}},emits:["setCharacNo"],setup(e,{expose:a,emit:t}){const o=(0,r.iH)(null),d=()=>{t("setCharacNo",o.value)},i=()=>{o.value=null};return a({resetCharacNo:i}),(a,t)=>{const i=(0,l.up)("el-radio"),s=(0,l.up)("el-table-column"),c=(0,l.up)("el-table"),p=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{data:e.data,ref:"tableRef",border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{width:"50",label:"#",align:"center"},{default:(0,l.w5)((e=>[(0,l.Wm)(i,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),label:e.row.charac_no,class:"radio",onChange:d},null,8,["modelValue","label"])])),_:1}),(0,l.Wm)(s,{prop:"charac_no",label:"角色编号",width:"180"}),(0,l.Wm)(s,{prop:"charac_name",label:"角色名称",width:"180"}),(0,l.Wm)(s,{prop:"create_time",label:"创建时间",width:"180"},{default:(0,l.w5)((e=>[(0,l._)("span",null,(0,n.zw)((0,r.SU)(u.vc)(e.row.create_time)),1)])),_:1}),(0,l.Wm)(s,{prop:"lev",label:"等级"}),(0,l.Wm)(s,{prop:"m_id",label:"uid",width:"150"})])),_:1},8,["data"])),[[p,e.loading]])])}}});const d=o;var i=d},3498:function(e,a,t){t.d(a,{Z:function(){return p}});var l=t(3396),n=t(7139),r=t(4870),u=t(491),o=t(7192);const d={style:{float:"left"}},i={style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"13px"}};var s=(0,l.aZ)({__name:"SelectAccount",emits:["setUid"],setup(e,{emit:a}){const t=(0,r.iH)(),s=(0,r.qj)({uid:null}),c=(0,r.qj)({uid:[{required:!0,message:"请选择账号",trigger:"blur"}]}),p=(0,r.qj)({data:[]}),m=(0,r.iH)(!1),f=async()=>{m.value=!0,p.data=await(0,u.T8)({has_roles:!0}),m.value=!1},g=async()=>{const e=await(0,o.Gu)(t);e&&a("setUid",s.uid)};return f(),(e,a)=>{const r=(0,l.up)("el-option"),u=(0,l.up)("el-select"),o=(0,l.up)("el-form-item"),f=(0,l.up)("el-button"),_=(0,l.up)("el-form");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(_,{model:s,rules:c,ref_key:"formRef",ref:t,"label-width":"100px"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{label:"账号ID",prop:"uid"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:s.uid,"onUpdate:modelValue":a[0]||(a[0]=e=>s.uid=e),filterable:"",clearable:"",placeholder:"选择账号id",loading:m.value,"loading-text":"正在加载账号"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(p.data,(e=>((0,l.wg)(),(0,l.j4)(r,{key:e.uid,label:e.uid,value:e.uid},{default:(0,l.w5)((()=>[(0,l._)("span",d,(0,n.zw)(e.uid),1),(0,l._)("span",i," 角色数:"+(0,n.zw)(e.roles),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue","loading"])])),_:1}),(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{type:"primary",onClick:g,size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)("查询")])),_:1})])),_:1})])),_:1},8,["model","rules"])])}}});const c=s;var p=c},282:function(e,a,t){t.r(a),t.d(a,{default:function(){return Z}});var l=t(3396),n=t(4870),r=t(2507),u=t(9136),o=t(3498),d=t(1285),i=t(7139),s=t(4466),c=t(6569);const p=e=>c.d.request({url:`/gm/roles/${e}/tasks`,method:"get"}),m=(e,a)=>c.d.request({url:`/gm/roles/${e}/tasks`,method:"put",data:a});var f=t(6881),g=t(5134);const _=(0,l._)("span",{class:"text-warning sm"},"注：觉醒任务无法完成，需要手动，或者使用 觉醒秘籍",-1);var w=(0,l.aZ)({__name:"TaskDetail",props:{data:{type:Array,required:!0,default:()=>[]},loading:{type:Boolean,required:!0,default:!1}},emits:["reloadTask"],setup(e,{expose:a,emit:t}){const r=(0,n.iH)([]),u=(0,n.iH)(null),o=e=>{r.value=e},d=async()=>{try{if(await(0,s.F)("是否批量完成任务？"),!u.value)return void(0,f.N3)("未获取到角色ID");const e=(0,g.w)(r.value,"play_1");await m(u.value,{ids:e}),(0,f.PE)("批量更新成功！"),t("reloadTask")}catch(e){}},c=e=>{u.value=e},p=e=>0!==e.play_1_trigger;return a({setCharacNo:c}),(a,t)=>{const n=(0,l.up)("el-row"),u=(0,l.up)("el-button"),s=(0,l.up)("el-table-column"),c=(0,l.up)("el-table"),m=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[_])),_:1}),(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{type:"primary",size:"small",onClick:d,disabled:!r.value.length},{default:(0,l.w5)((()=>[(0,l.Uk)("批量完成 ")])),_:1},8,["disabled"])])),_:1}),(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{data:e.data,ref:"tableRef",border:"",onSelectionChange:o},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{type:"selection",width:"55",selectable:p}),(0,l.Wm)(s,{prop:"play_1",label:"任务ID",width:"180"}),(0,l.Wm)(s,{prop:"play_1_trigger",label:"是否已完成",width:"180"},{default:(0,l.w5)((e=>[(0,l._)("span",null,(0,i.zw)(e.row.play_1_trigger?"未完成":"已完成"),1)])),_:1}),(0,l.Wm)(s,{prop:"charac_no",label:"角色编号"})])),_:1},8,["data"])),[[m,e.loading]])])}}});const v=w;var h=v,b=t(9456);const y={class:"tc-step-border"},W={class:"l"};var q=(0,l.aZ)({__name:"index",setup(e){const a=(0,n.qj)({data:[],loading:!1}),t=(0,n.qj)({data:[],loading:!1}),i=(0,n.iH)(null),s=(0,n.iH)(null),c=()=>{a.data=[],t.data=[],s.value.resetCharacNo()},m=async e=>{c();try{a.loading=!0,a.data=await(0,b.F3)(e),a.loading=!1}catch(t){a.loading=!1}};let g=null;const _=async e=>{if(e){g=e;try{t.loading=!0,t.data=await p(e),i.value.setCharacNo(e),t.loading=!1}catch(a){t.loading=!1}}else(0,f.KU)("请选择角色")},w=()=>{_(g)};return(e,c)=>((0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)((0,n.SU)(r.Z),{title:"任务清理"}),(0,l._)("div",y,[(0,l._)("div",W,[(0,l.Wm)((0,n.SU)(u.Z),{num:"1",title:"账号选择"},{default:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(o.Z),{onSetUid:m})])),_:1}),(0,l.Wm)((0,n.SU)(u.Z),{num:"2",title:"角色选择"},{default:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(d.Z),{ref_key:"roleTableRef",ref:s,loading:a.loading,data:a.data,onSetCharacNo:_},null,8,["loading","data"])])),_:1}),(0,l.Wm)((0,n.SU)(u.Z),{num:"3",title:"任务详情","is-last":""},{default:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(h),{ref_key:"taskRef",ref:i,loading:t.loading,data:t.data,onReloadTask:w},null,8,["loading","data"])])),_:1})])])]))}});const k=q;var Z=k}}]);