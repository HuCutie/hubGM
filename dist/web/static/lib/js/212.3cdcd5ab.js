"use strict";(self["webpackChunkvue3_template"]=self["webpackChunkvue3_template"]||[]).push([[212],{7096:function(e,l,a){a.r(l),a.d(l,{default:function(){return w}});var t=a(6768),u=a(144),o=a(9850),d=a(2900),n=a(618),r=a(5130),i=a(8632),p=a(9408);const m=(e,l)=>p.L.request({url:`/gm/roles/${e}/email`,method:"post",data:l}),b=e=>p.L.request({url:"/gm/gold/list",method:"get",params:e});var s=a(8515);const g=(0,t.Lk)("span",{class:"text-warning sm"},"史诗装备不要勾选！",-1),f=(0,t.Lk)("div",{class:"card-header"},[(0,t.Lk)("span",null,"物品代码")],-1),_=["value","onChange"];var c=(0,t.pM)({__name:"EmailForm",setup(e,{expose:l}){const a=(0,u.KR)(),o=(0,u.Kh)({code:null,number:0,seperate_upgrade:0,upgrade:0,is_amplify:!1,amplify_option:3,amplify_value:0,gold:0,seal_flag:!1}),d=(0,u.Kh)({code:[{type:"integer",min:0,message:"请输入物品代码",trigger:"blur"}],number:[{required:!0,message:"请输入数量",trigger:"blur"}],upgrade:[{type:"integer",min:0,max:31,message:"强化/增幅等级在0至31",trigger:"blur"}]}),n=(0,u.KR)(null),p=[{label:"体力",value:1},{label:"精神",value:2},{label:"力量",value:3},{label:"智力",value:4}],c=(0,u.Kh)({data:[],total:0,loading:!1}),k=(0,u.Kh)({page:1,per_page:10});let F=(0,u.Kh)({name:""});const v=(0,u.KR)(),y=async()=>{const e=await(0,i.tf)(a);if(!e)return;if(!n.value)return void(0,s.gJ)("未选择角色ID");"string"===typeof o.gold&&(o.gold=0);const l={...o};l.gold=1e4*o.gold;try{await m(n.value,l),(0,s.Jl)("发送成功，请小退一下！")}catch(t){}},V=e=>{n.value=e},h=async()=>{c.loading=!0;const e={...F,...k},{items:l,total:a}=await b(e);c.data=l,c.total=a,c.loading=!1},C=e=>{k.per_page=e,h()},R=e=>{k.page=e,h()},w=e=>{o.code=e.code},K=()=>{k.page=1,h()},U=()=>{v.value.resetFields(),k.page=1,h()};return h(),l({setCharacNo:V}),(e,l)=>{const n=(0,t.g2)("el-input"),i=(0,t.g2)("el-form-item"),m=(0,t.g2)("el-checkbox"),b=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),V=(0,t.g2)("el-button"),h=(0,t.g2)("el-form"),x=(0,t.g2)("el-col"),L=(0,t.g2)("el-row"),M=(0,t.g2)("el-table-column"),z=(0,t.g2)("el-table"),A=(0,t.g2)("el-pagination"),E=(0,t.g2)("el-card"),N=(0,t.gN)("loading");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(L,{gutter:20},{default:(0,t.k6)((()=>[(0,t.bF)(x,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(h,{model:o,rules:d,ref_key:"formRef",ref:a,"label-width":"100px"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{label:"物品代码",prop:"code"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:o.code,"onUpdate:modelValue":l[0]||(l[0]=e=>o.code=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,{label:"数量",prop:"number"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:o.number,"onUpdate:modelValue":l[1]||(l[1]=e=>o.number=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,{label:"武器锻造等级",prop:"seperate_upgrade"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:o.seperate_upgrade,"onUpdate:modelValue":l[2]||(l[2]=e=>o.seperate_upgrade=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,{label:"强化等级",prop:"upgrade"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:o.upgrade,"onUpdate:modelValue":l[3]||(l[3]=e=>o.upgrade=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,{label:"具备异界属性"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{modelValue:o.is_amplify,"onUpdate:modelValue":l[4]||(l[4]=e=>o.is_amplify=e)},null,8,["modelValue"])])),_:1}),(0,t.bo)((0,t.bF)(i,{label:"红字"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.amplify_option,"onUpdate:modelValue":l[5]||(l[5]=e=>o.amplify_option=e)},{default:(0,t.k6)((()=>[((0,t.uX)(),(0,t.CE)(t.FK,null,(0,t.pI)(p,(e=>(0,t.bF)(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1},512),[[r.aG,o.is_amplify]]),(0,t.bo)((0,t.bF)(i,{label:"追加属性",prop:"amplify_value"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:o.amplify_value,"onUpdate:modelValue":l[6]||(l[6]=e=>o.amplify_value=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1},512),[[r.aG,o.is_amplify]]),(0,t.bF)(i,{label:"金币",prop:"gold"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:o.gold,"onUpdate:modelValue":l[7]||(l[7]=e=>o.gold=e),modelModifiers:{number:!0}},{append:(0,t.k6)((()=>[(0,t.eW)("万")])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(i,{label:"是否封装"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{modelValue:o.seal_flag,"onUpdate:modelValue":l[8]||(l[8]=e=>o.seal_flag=e)},null,8,["modelValue"]),g])),_:1}),(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(V,{type:"primary",size:"small",onClick:y},{default:(0,t.k6)((()=>[(0,t.eW)("发送")])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1}),(0,t.bF)(x,{span:13,offset:3},{default:(0,t.k6)((()=>[(0,t.bF)(E,{class:"box-card"},{header:(0,t.k6)((()=>[f])),default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(L,null,{default:(0,t.k6)((()=>[(0,t.bF)(h,{inline:!0,model:(0,u.R1)(F),ref_key:"filterFormRef",ref:v,"label-width":"100px",onSubmit:l[10]||(l[10]=(0,r.D$)((()=>{}),["prevent"]))},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(i,{label:"物品名称:",prop:"name"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:(0,u.R1)(F).name,"onUpdate:modelValue":l[9]||(l[9]=e=>(0,u.R1)(F).name=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(V,{type:"primary",onClick:K},{default:(0,t.k6)((()=>[(0,t.eW)("查询")])),_:1}),(0,t.bF)(V,{onClick:(0,r.D$)(U,["prevent"])},{default:(0,t.k6)((()=>[(0,t.eW)("重置")])),_:1},8,["onClick"])])),_:1})])])),_:1},8,["model"])])),_:1}),(0,t.bF)(L,null,{default:(0,t.k6)((()=>[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(z,{data:c.data,border:"",fit:""},{default:(0,t.k6)((()=>[(0,t.bF)(M,{width:"55"},{default:(0,t.k6)((e=>[((0,t.uX)(),(0,t.CE)("input",{type:"radio",name:"selectedItemCode",value:e.row.code,key:e.row.id,onChange:l=>w(e.row)},null,40,_))])),_:1}),(0,t.bF)(M,{prop:"code",label:"物品编号",width:"150"}),(0,t.bF)(M,{prop:"name",label:"物品名称"})])),_:1},8,["data"])),[[N,c.loading]])])),_:1}),(0,t.bF)(L,null,{default:(0,t.k6)((()=>[(0,t.bF)(A,{"current-page":k.page,"page-sizes":[10,20,30,40,50],"page-size":k.per_page,total:c.total,background:"",layout:"total, sizes, prev, pager, next, jumper",onSizeChange:C,onCurrentChange:R},null,8,["current-page","page-size","total"])])),_:1})])])),_:1})])),_:1})])),_:1})])}}});const k=c;var F=k,v=a(2731),y=a(920);const V={class:"tc-step-border"},h={class:"l"};var C=(0,t.pM)({__name:"index",setup(e){const l=(0,u.Kh)({data:[],loading:!1}),a=async e=>{try{l.loading=!0,l.data=await(0,v.O0)(e),r.value.setCharacNo(null),l.loading=!1}catch(a){l.loading=!1}},r=(0,u.KR)(null),i=e=>{r.value.setCharacNo(e)};return(e,p)=>{const m=(0,t.g2)("el-row");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)((0,u.R1)(o.A),{title:"邮件工具"})])),_:1}),(0,t.Lk)("div",V,[(0,t.Lk)("div",h,[(0,t.bF)((0,u.R1)(d.A),{num:"1",title:"账号选择"},{default:(0,t.k6)((()=>[(0,t.bF)((0,u.R1)(n.A),{onSetUid:a})])),_:1}),(0,t.bF)((0,u.R1)(d.A),{num:"2",title:"角色选择"},{default:(0,t.k6)((()=>[(0,t.bF)((0,u.R1)(y.A),{ref:"roleTableRef",loading:l.loading,data:l.data,onSetCharacNo:i},null,8,["loading","data"])])),_:1}),(0,t.bF)((0,u.R1)(d.A),{num:"3",title:"发送邮件","is-last":""},{default:(0,t.k6)((()=>[(0,t.bF)((0,u.R1)(F),{ref_key:"emailFormRef",ref:r},null,512)])),_:1})])])])}}});const R=C;var w=R}}]);